%#
%# $Id$
%#
% layout 'default';
% title 'DBD';

% use Mojo::Util qw(dumper);

% my $u = $c->app->master;

% my $agent_id = $c->req->param('agent_id') || 0;
% my $profile = $u->agent_profile($agent_id);

% if ($profile) {
    % my $agent_name = $profile->{name};
    % my $login = $profile->{login};
    % my $password = $profile->{password};

    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="medium-6 medium-centered cell">

                <form accept-charset="UTF-8" action="/agent/update/handler" method="post" data-abide novalidate>
                    <h5 class="text-center">Edit agent <%= $address %></h5>
                    <input type="hidden" name="agent_id" value="<%= $agent_id %>"/>

                    <label>Hostname
                        <input type="text" value="<%= $agent_name %>" name="agent_name" required pattern="[_.-zA-Z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,42}"/>
                        <span class="form-error">Mandatory, 2 or more letter</span>
                    </label>

                    <label>Login
                        <input type="text" value="<%= $login %>" name="login" required pattern="[_.-zA-Z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,42}"/>
                        <span class="form-error">Mandatory, 2 or more letter</span>
                    </label>

                    <label>Password
                        <input type="text" value="<%= $password %>" name="password" required pattern="[_.-zA-Z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,42}"/>
                        <span class="form-error">Mandatory, 2 or more letter</span>
                    </label>

                    <div class="text-center">
                        <button type="submit" class="button">Accept</button>
                        <a class="button" href="/agent/list?">Escape</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
% }

% unless ($profile) {
        <div class="callout warning">Agent with id <%= $agent_id %> not exist</div>
% }
%#EOF
